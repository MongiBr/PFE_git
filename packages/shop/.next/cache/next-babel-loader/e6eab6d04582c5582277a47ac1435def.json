{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"/Volumes/Second/npm/PFE_git/charioTN/packages/shop/containers/ServiceProviders/ServiceProviders.tsx\";\n\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query getServiceProviders(\\n    $type: String\\n    $text: String\\n    $category: String\\n    $offset: Int\\n    $limit: Int\\n  ) {\\n    serviceProviders(\\n      type: $type\\n      text: $text\\n      category: $category\\n      offset: $offset\\n      limit: $limit\\n    ) {\\n      items {\\n        name\\n      }\\n      hasMore\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport dynamic from \"next/dynamic\";\nimport gql from \"graphql-tag\";\nimport { openModal, closeModal } from \"@redq/reuse-modal\";\nimport ProductCard from \"components/ProductCard/ProductCard\";\nimport { ProductsRow, ProductsCol, ButtonWrapper, LoaderWrapper, LoaderItem, ProductCardWrapper } from \"./ServiceProviders.style\";\nimport { CURRENCY } from \"helper/constant\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport Button from \"components/Button/Button\";\nimport Loader from \"components/Loader/Loader\";\nimport Placeholder from \"components/Placeholder/Placeholder\";\nimport Fade from \"react-reveal/Fade\";\nimport NoResultFound from \"components/NoResult/NoResult\";\nvar QuickView = dynamic(function () {\n  return import(\"../QuickView/QuickView\");\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"../QuickView/QuickView\")];\n    },\n    modules: [\"../QuickView/QuickView\"]\n  }\n});\nvar GET_SERVICE_PROVIDERS = gql(_templateObject());\nexport var ServiceProviders = function ServiceProviders(_ref) {\n  var deviceType = _ref.deviceType,\n      type = _ref.type,\n      _ref$fetchLimit = _ref.fetchLimit,\n      fetchLimit = _ref$fetchLimit === void 0 ? 8 : _ref$fetchLimit,\n      _ref$loadMore = _ref.loadMore,\n      loadMore = _ref$loadMore === void 0 ? true : _ref$loadMore;\n  var router = useRouter();\n\n  var _useState = useState(false),\n      loadingMore = _useState[0],\n      toggleLoading = _useState[1];\n\n  var _useQuery = useQuery(GET_SERVICE_PROVIDERS, {\n    variables: {\n      type: type,\n      text: router.query.text,\n      category: router.query.category,\n      offset: 0,\n      limit: fetchLimit\n    }\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      loading = _useQuery.loading,\n      fetchMore = _useQuery.fetchMore;\n\n  console.log(data); // Quick View Modal\n\n  var handleModalClose = function handleModalClose() {\n    var href = \"\".concat(router.pathname);\n    var as = router.asPath;\n    router.push(href, as, {\n      shallow: true\n    });\n    closeModal();\n  };\n\n  var handleQuickViewModal = React.useCallback(function (modalProps, deviceType, onModalClose) {\n    if (router.pathname === \"/product/[slug]\") {\n      var _as = \"/product/\".concat(modalProps.slug);\n\n      router.push(router.pathname, _as);\n      return;\n    }\n\n    openModal({\n      show: true,\n      overlayClassName: \"quick-view-overlay\",\n      closeOnClickOutside: false,\n      component: QuickView,\n      componentProps: {\n        modalProps: modalProps,\n        deviceType: deviceType,\n        onModalClose: onModalClose\n      },\n      closeComponent: \"div\",\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: \"quick-view-modal\",\n        width: 900,\n        y: 30,\n        height: \"auto\",\n        transition: {\n          mass: 1,\n          tension: 0,\n          friction: 0\n        }\n      }\n    });\n    var href = \"\".concat(router.pathname, \"?\").concat(modalProps.slug);\n    var as = \"/product/\".concat(modalProps.slug);\n    router.push(href, as, {\n      shallow: true\n    });\n  }, []);\n\n  if (loading) {\n    return __jsx(LoaderWrapper, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, __jsx(LoaderItem, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, __jsx(Placeholder, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    })), __jsx(LoaderItem, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }, __jsx(Placeholder, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    })), __jsx(LoaderItem, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }, __jsx(Placeholder, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  if (error) return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }, error.message);\n\n  if (!data || !data.serviceProviders || data.serviceProviders.items.length === 0) {\n    return __jsx(NoResultFound, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 12\n      }\n    });\n  }\n\n  var handleLoadMore = function handleLoadMore() {\n    toggleLoading(true);\n    fetchMore({\n      variables: {\n        offset: Number(data.serviceProviders.items.length),\n        limit: fetchLimit\n      },\n      updateQuery: function updateQuery(prev, _ref2) {\n        var fetchMoreResult = _ref2.fetchMoreResult;\n        toggleLoading(false);\n\n        if (!fetchMoreResult) {\n          return prev;\n        }\n\n        return {\n          serviceProviders: {\n            __typename: prev.serviceProviders.__typename,\n            items: [].concat(_toConsumableArray(prev.serviceProviders.items), _toConsumableArray(fetchMoreResult.serviceProviders.items)),\n            hasMore: fetchMoreResult.serviceProviders.hasMore\n          }\n        };\n      }\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(ProductsRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }, data.serviceProviders.items.map(function (item, index) {\n    return __jsx(ProductsCol, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }, __jsx(ProductCardWrapper, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }, __jsx(Fade, {\n      duration: 800,\n      delay: index * 10,\n      style: {\n        height: \"100%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, __jsx(ProductCard, {\n      title: item.title,\n      description: item.description,\n      image: item.image,\n      weight: item.unit,\n      currency: CURRENCY,\n      price: item.price,\n      salePrice: item.salePrice,\n      discountInPercent: item.discountInPercent,\n      data: item,\n      deviceType: deviceType,\n      onClick: function onClick() {\n        return handleQuickViewModal(item, deviceType, handleModalClose);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }))));\n  })), loadMore && data.serviceProviders.hasMore && __jsx(ButtonWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    onClick: handleLoadMore,\n    title: \"Load More\",\n    intlButtonId: \"loadMoreBtn\",\n    size: \"small\",\n    isLoading: loadingMore,\n    loader: __jsx(Loader, {\n      color: \"#fed700\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }\n    }),\n    style: {\n      minWidth: 135,\n      backgroundColor: \"#ffffff\",\n      border: \"1px solid #f1f1f1\",\n      color: \"#fed700\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  })));\n};\nexport default ServiceProviders;","map":{"version":3,"sources":["/Volumes/Second/npm/PFE_git/charioTN/packages/shop/containers/ServiceProviders/ServiceProviders.tsx"],"names":["React","useState","useRouter","dynamic","gql","openModal","closeModal","ProductCard","ProductsRow","ProductsCol","ButtonWrapper","LoaderWrapper","LoaderItem","ProductCardWrapper","CURRENCY","useQuery","Button","Loader","Placeholder","Fade","NoResultFound","QuickView","GET_SERVICE_PROVIDERS","ServiceProviders","deviceType","type","fetchLimit","loadMore","router","loadingMore","toggleLoading","variables","text","query","category","offset","limit","data","error","loading","fetchMore","console","log","handleModalClose","href","pathname","as","asPath","push","shallow","handleQuickViewModal","useCallback","modalProps","onModalClose","slug","show","overlayClassName","closeOnClickOutside","component","componentProps","closeComponent","config","enableResizing","disableDragging","className","width","y","height","transition","mass","tension","friction","message","serviceProviders","items","length","handleLoadMore","Number","updateQuery","prev","fetchMoreResult","__typename","hasMore","map","item","index","title","description","image","unit","price","salePrice","discountInPercent","minWidth","backgroundColor","border","color"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport dynamic from \"next/dynamic\";\nimport gql from \"graphql-tag\";\nimport { openModal, closeModal } from \"@redq/reuse-modal\";\nimport ProductCard from \"components/ProductCard/ProductCard\";\nimport {\n  ProductsRow,\n  ProductsCol,\n  ButtonWrapper,\n  LoaderWrapper,\n  LoaderItem,\n  ProductCardWrapper,\n} from \"./ServiceProviders.style\";\nimport { CURRENCY } from \"helper/constant\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport Button from \"components/Button/Button\";\nimport Loader from \"components/Loader/Loader\";\nimport Placeholder from \"components/Placeholder/Placeholder\";\nimport Fade from \"react-reveal/Fade\";\nimport NoResultFound from \"components/NoResult/NoResult\";\n\nconst QuickView = dynamic(() => import(\"../QuickView/QuickView\"));\n\nconst GET_SERVICE_PROVIDERS = gql`\n  query getServiceProviders(\n    $type: String\n    $text: String\n    $category: String\n    $offset: Int\n    $limit: Int\n  ) {\n    serviceProviders(\n      type: $type\n      text: $text\n      category: $category\n      offset: $offset\n      limit: $limit\n    ) {\n      items {\n        name\n      }\n      hasMore\n    }\n  }\n`;\n\ntype ServiceProvidersProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n  type: string;\n  fetchLimit?: number;\n  loadMore?: boolean;\n};\nexport const ServiceProviders: React.FC<ServiceProvidersProps> = ({\n  deviceType,\n  type,\n  fetchLimit = 8,\n  loadMore = true,\n}) => {\n  const router = useRouter();\n  const [loadingMore, toggleLoading] = useState(false);\n  const { data, error, loading, fetchMore } = useQuery(GET_SERVICE_PROVIDERS, {\n    variables: {\n      type: type,\n      text: router.query.text,\n      category: router.query.category,\n      offset: 0,\n      limit: fetchLimit,\n    },\n  });\n  console.log(data);\n  // Quick View Modal\n  const handleModalClose = () => {\n    const href = `${router.pathname}`;\n    const as = router.asPath;\n    router.push(href, as, { shallow: true });\n    closeModal();\n  };\n  const handleQuickViewModal = React.useCallback(\n    (modalProps: any, deviceType: any, onModalClose: any) => {\n      if (router.pathname === \"/product/[slug]\") {\n        const as = `/product/${modalProps.slug}`;\n        router.push(router.pathname, as);\n        return;\n      }\n      openModal({\n        show: true,\n        overlayClassName: \"quick-view-overlay\",\n        closeOnClickOutside: false,\n        component: QuickView,\n        componentProps: { modalProps, deviceType, onModalClose },\n        closeComponent: \"div\",\n        config: {\n          enableResizing: false,\n          disableDragging: true,\n          className: \"quick-view-modal\",\n          width: 900,\n          y: 30,\n          height: \"auto\",\n          transition: {\n            mass: 1,\n            tension: 0,\n            friction: 0,\n          },\n        },\n      });\n      const href = `${router.pathname}?${modalProps.slug}`;\n      const as = `/product/${modalProps.slug}`;\n      router.push(href, as, { shallow: true });\n    },\n    []\n  );\n\n  if (loading) {\n    return (\n      <LoaderWrapper>\n        <LoaderItem>\n          <Placeholder />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder />\n        </LoaderItem>\n      </LoaderWrapper>\n    );\n  }\n\n  if (error) return <div>{error.message}</div>;\n  if (\n    !data ||\n    !data.serviceProviders ||\n    data.serviceProviders.items.length === 0\n  ) {\n    return <NoResultFound />;\n  }\n  const handleLoadMore = () => {\n    toggleLoading(true);\n    fetchMore({\n      variables: {\n        offset: Number(data.serviceProviders.items.length),\n        limit: fetchLimit,\n      },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        toggleLoading(false);\n        if (!fetchMoreResult) {\n          return prev;\n        }\n        return {\n          serviceProviders: {\n            __typename: prev.serviceProviders.__typename,\n            items: [\n              ...prev.serviceProviders.items,\n              ...fetchMoreResult.serviceProviders.items,\n            ],\n            hasMore: fetchMoreResult.serviceProviders.hasMore,\n          },\n        };\n      },\n    });\n  };\n\n  return (\n    <>\n      <ProductsRow>\n        {data.serviceProviders.items.map((item: any, index: number) => (\n          <ProductsCol key={index}>\n            <ProductCardWrapper>\n              <Fade\n                duration={800}\n                delay={index * 10}\n                style={{ height: \"100%\" }}\n              >\n                <ProductCard\n                  title={item.title}\n                  description={item.description}\n                  image={item.image}\n                  weight={item.unit}\n                  currency={CURRENCY}\n                  price={item.price}\n                  salePrice={item.salePrice}\n                  discountInPercent={item.discountInPercent}\n                  data={item}\n                  deviceType={deviceType}\n                  onClick={() =>\n                    handleQuickViewModal(item, deviceType, handleModalClose)\n                  }\n                />\n              </Fade>\n            </ProductCardWrapper>\n          </ProductsCol>\n        ))}\n      </ProductsRow>\n      {loadMore && data.serviceProviders.hasMore && (\n        <ButtonWrapper>\n          <Button\n            onClick={handleLoadMore}\n            title=\"Load More\"\n            intlButtonId=\"loadMoreBtn\"\n            size=\"small\"\n            isLoading={loadingMore}\n            loader={<Loader color=\"#fed700\" />}\n            style={{\n              minWidth: 135,\n              backgroundColor: \"#ffffff\",\n              border: \"1px solid #f1f1f1\",\n              color: \"#fed700\",\n            }}\n          />\n        </ButtonWrapper>\n      )}\n    </>\n  );\n};\nexport default ServiceProviders;\n"]},"metadata":{},"sourceType":"module"}