{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Volumes/Second/npm/PFE_git/packages/shop/containers/ProductDetails/ProductDetails.tsx\";\n\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport Button from 'components/Button/Button';\nimport InputIncDec from 'components/InputIncDec/InputIncDec';\nimport { ProductDetailsWrapper, ProductPreview, ProductInfo, ProductTitle, BackButton, ProductWeight, ProductDescription, ProductMeta, ProductCartWrapper, ProductPriceWrapper, ProductPrice, SalePrice, ProductCartBtn, MetaSingle, MetaItem, RelatedItems } from './ProductDetails.style';\nimport { LongArrowLeft, CartIcon } from 'components/AllSvgIcon';\nimport ReadMore from 'components/Truncate/Truncate';\nimport CarouselWithCustomDots from 'components/MultiCarousel/MultiCarousel';\nimport Products from 'containers/Products/Products';\nimport { CartContext } from 'contexts/cart/cart.context';\nimport { CURRENCY } from 'helper/constant';\nimport { findProductIndex, getProductQuantity } from 'helper/utility';\nimport { FormattedMessage } from 'react-intl';\nimport LanguageContext from 'contexts/language/language.context';\n\nvar ProductDetails = function ProductDetails(_ref) {\n  var product = _ref.product,\n      deviceType = _ref.deviceType;\n\n  var _useContext = useContext(LanguageContext),\n      lang = _useContext.state.lang;\n\n  var _useContext2 = useContext(CartContext),\n      add = _useContext2.add,\n      update = _useContext2.update,\n      products = _useContext2.products;\n\n  var data = product;\n  var index = findProductIndex(products, data.id);\n  var quantity = getProductQuantity(products, index);\n\n  var handleClick = function handleClick(e) {\n    e.stopPropagation();\n    add(e, data);\n  };\n\n  var handleUpdate = function handleUpdate(value, e) {\n    if (index === -1 && value === 1) {\n      add(e, data);\n    } else {\n      update(data.id, value);\n    }\n  };\n\n  useEffect(function () {\n    setTimeout(function () {\n      window.scrollTo(0, 0);\n    }, 500);\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(ProductDetailsWrapper, {\n    className: \"product-card\",\n    dir: \"ltr\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, lang === 'ar' || lang === 'he' ? '' : __jsx(ProductPreview, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, __jsx(BackButton, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    title: \"Back\",\n    intlButtonId: \"backBtn\",\n    iconPosition: \"left\",\n    size: \"small\",\n    style: {\n      backgroundColor: '#ffffff',\n      border: '1px solid #f1f1f1',\n      color: '#77798c'\n    },\n    icon: __jsx(LongArrowLeft, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 23\n      }\n    }),\n    onClick: Router.back,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  })), __jsx(CarouselWithCustomDots, {\n    items: product.gallery,\n    deviceType: deviceType,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  })), __jsx(ProductInfo, {\n    dir: lang === 'ar' || lang === 'he' ? 'rtl' : 'ltr',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, __jsx(ProductTitle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, product.title), __jsx(ProductWeight, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, product.unit), __jsx(ProductDescription, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, __jsx(ReadMore, {\n    character: 600,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, product.description)), __jsx(ProductCartWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, __jsx(ProductPriceWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, product.discountInPercent ? __jsx(SalePrice, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, CURRENCY, product.price) : '', __jsx(ProductPrice, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, CURRENCY, product.salePrice ? product.salePrice : product.price)), __jsx(ProductCartBtn, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, quantity <= 0 ? __jsx(Button, {\n    title: \"Add to Cart\",\n    intlButtonId: \"addToCartButton\",\n    iconPosition: \"left\",\n    size: \"small\",\n    className: \"cart-button\",\n    icon: __jsx(CartIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }),\n    onClick: function onClick(e) {\n      return handleClick(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }) : __jsx(InputIncDec, {\n    value: quantity,\n    onClick: function onClick(e) {\n      e.stopPropagation(onclick);\n    },\n    onUpdate: function onUpdate(value, e) {\n      return handleUpdate(value, e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }))), __jsx(ProductMeta, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, __jsx(MetaSingle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, product.categories ? product.categories.map(function (item) {\n    return __jsx(Link, {\n      href: \"/\".concat(product.type.toLowerCase(), \"?category=\").concat(item.slug),\n      key: \"link-\".concat(item.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 25\n      }\n    }, __jsx(MetaItem, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 27\n      }\n    }, item.title)));\n  }) : ''))), lang === 'ar' || lang === 'he' ? __jsx(ProductPreview, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, __jsx(BackButton, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    title: \"Back\",\n    intlButtonId: \"backBtn\",\n    iconPosition: \"left\",\n    size: \"small\",\n    style: {\n      backgroundColor: '#ffffff',\n      border: '1px solid #f1f1f1',\n      color: '#77798c'\n    },\n    icon: __jsx(LongArrowLeft, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 23\n      }\n    }),\n    onClick: Router.back,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  })), __jsx(CarouselWithCustomDots, {\n    items: product.gallery,\n    deviceType: deviceType,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  })) : ''), __jsx(RelatedItems, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"intlReletedItems\",\n    defaultMessage: \"Related Items\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  })), __jsx(Products, {\n    type: product.type.toLowerCase(),\n    deviceType: deviceType,\n    loadMore: false,\n    fetchLimit: 10,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default ProductDetails;","map":{"version":3,"sources":["/Volumes/Second/npm/PFE_git/packages/shop/containers/ProductDetails/ProductDetails.tsx"],"names":["React","useContext","useEffect","Link","Router","Button","InputIncDec","ProductDetailsWrapper","ProductPreview","ProductInfo","ProductTitle","BackButton","ProductWeight","ProductDescription","ProductMeta","ProductCartWrapper","ProductPriceWrapper","ProductPrice","SalePrice","ProductCartBtn","MetaSingle","MetaItem","RelatedItems","LongArrowLeft","CartIcon","ReadMore","CarouselWithCustomDots","Products","CartContext","CURRENCY","findProductIndex","getProductQuantity","FormattedMessage","LanguageContext","ProductDetails","product","deviceType","lang","state","add","update","products","data","index","id","quantity","handleClick","e","stopPropagation","handleUpdate","value","setTimeout","window","scrollTo","backgroundColor","border","color","back","gallery","title","unit","description","discountInPercent","price","salePrice","onclick","categories","map","item","type","toLowerCase","slug"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport Button from 'components/Button/Button';\nimport InputIncDec from 'components/InputIncDec/InputIncDec';\nimport {\n  ProductDetailsWrapper,\n  ProductPreview,\n  ProductInfo,\n  ProductTitle,\n  BackButton,\n  ProductWeight,\n  ProductDescription,\n  ProductMeta,\n  ProductCartWrapper,\n  ProductPriceWrapper,\n  ProductPrice,\n  SalePrice,\n  ProductCartBtn,\n  MetaSingle,\n  MetaItem,\n  RelatedItems,\n} from './ProductDetails.style';\nimport { LongArrowLeft, CartIcon } from 'components/AllSvgIcon';\nimport ReadMore from 'components/Truncate/Truncate';\nimport CarouselWithCustomDots from 'components/MultiCarousel/MultiCarousel';\nimport Products from 'containers/Products/Products';\nimport { CartContext } from 'contexts/cart/cart.context';\nimport { CURRENCY } from 'helper/constant';\nimport { findProductIndex, getProductQuantity } from 'helper/utility';\nimport { Product } from 'interfaces';\nimport { FormattedMessage } from 'react-intl';\nimport LanguageContext from 'contexts/language/language.context';\n\ntype ProdutDetailsProps = {\n  product: Product | any;\n  deviceType: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n};\n\nconst ProductDetails: React.FunctionComponent<ProdutDetailsProps> = ({\n  product,\n  deviceType,\n}) => {\n  const {\n    state: { lang },\n  }: any = useContext(LanguageContext);\n  const { add, update, products } = useContext(CartContext);\n  const data = product;\n  const index = findProductIndex(products, data.id);\n  const quantity = getProductQuantity(products, index);\n\n  const handleClick = e => {\n    e.stopPropagation();\n    add(e, data);\n  };\n\n  const handleUpdate = (value: number, e: any) => {\n    if (index === -1 && value === 1) {\n      add(e, data);\n    } else {\n      update(data.id, value);\n    }\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      window.scrollTo(0, 0);\n    }, 500);\n  }, []);\n\n  return (\n    <>\n      <ProductDetailsWrapper className='product-card' dir='ltr'>\n        {lang === 'ar' || lang === 'he' ? (\n          ''\n        ) : (\n          <ProductPreview>\n            <BackButton>\n              <Button\n                title='Back'\n                intlButtonId='backBtn'\n                iconPosition='left'\n                size='small'\n                style={{\n                  backgroundColor: '#ffffff',\n                  border: '1px solid #f1f1f1',\n                  color: '#77798c',\n                }}\n                icon={<LongArrowLeft />}\n                onClick={Router.back}\n              />\n            </BackButton>\n\n            <CarouselWithCustomDots\n              items={product.gallery}\n              deviceType={deviceType}\n            />\n          </ProductPreview>\n        )}\n\n        <ProductInfo dir={lang === 'ar' || lang === 'he' ? 'rtl' : 'ltr'}>\n          <ProductTitle>{product.title}</ProductTitle>\n          <ProductWeight>{product.unit}</ProductWeight>\n          <ProductDescription>\n            <ReadMore character={600}>{product.description}</ReadMore>\n          </ProductDescription>\n\n          <ProductCartWrapper>\n            <ProductPriceWrapper>\n              {product.discountInPercent ? (\n                <SalePrice>\n                  {CURRENCY}\n                  {product.price}\n                </SalePrice>\n              ) : (\n                ''\n              )}\n\n              <ProductPrice>\n                {CURRENCY}\n                {product.salePrice ? product.salePrice : product.price}\n              </ProductPrice>\n            </ProductPriceWrapper>\n\n            <ProductCartBtn>\n              {quantity <= 0 ? (\n                <Button\n                  title='Add to Cart'\n                  intlButtonId='addToCartButton'\n                  iconPosition='left'\n                  size='small'\n                  className='cart-button'\n                  icon={<CartIcon />}\n                  onClick={e => handleClick(e)}\n                />\n              ) : (\n                <InputIncDec\n                  value={quantity}\n                  onClick={(e: any) => {\n                    e.stopPropagation(onclick);\n                  }}\n                  onUpdate={(value: number, e) => handleUpdate(value, e)}\n                />\n              )}\n            </ProductCartBtn>\n          </ProductCartWrapper>\n\n          <ProductMeta>\n            <MetaSingle>\n              {product.categories\n                ? product.categories.map((item: any) => (\n                    <Link\n                      href={`/${product.type.toLowerCase()}?category=${item.slug}`}\n                      key={`link-${item.id}`}\n                    >\n                      {\n                        <a>\n                          <MetaItem>{item.title}</MetaItem>\n                        </a>\n                      }\n                    </Link>\n                  ))\n                : ''}\n            </MetaSingle>\n          </ProductMeta>\n        </ProductInfo>\n\n        {lang === 'ar' || lang === 'he' ? (\n          <ProductPreview>\n            <BackButton>\n              <Button\n                title='Back'\n                intlButtonId='backBtn'\n                iconPosition='left'\n                size='small'\n                style={{\n                  backgroundColor: '#ffffff',\n                  border: '1px solid #f1f1f1',\n                  color: '#77798c',\n                }}\n                icon={<LongArrowLeft />}\n                onClick={Router.back}\n              />\n            </BackButton>\n\n            <CarouselWithCustomDots\n              items={product.gallery}\n              deviceType={deviceType}\n            />\n          </ProductPreview>\n        ) : (\n          ''\n        )}\n      </ProductDetailsWrapper>\n\n      <RelatedItems>\n        <h2>\n          <FormattedMessage\n            id='intlReletedItems'\n            defaultMessage='Related Items'\n          />\n        </h2>\n        <Products\n          type={product.type.toLowerCase()}\n          deviceType={deviceType}\n          loadMore={false}\n          fetchLimit={10}\n        />\n      </RelatedItems>\n    </>\n  );\n};\n\nexport default ProductDetails;\n"]},"metadata":{},"sourceType":"module"}