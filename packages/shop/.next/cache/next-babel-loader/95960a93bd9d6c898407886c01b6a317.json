{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"/Volumes/Second/npm/PFE_git/charioTN/packages/shop/containers/Magasins/Magasins.tsx\";\n\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query getProducts(\\n    $type: String\\n    $text: String\\n    $category: String\\n    $offset: Int\\n    $limit: Int\\n  ) {\\n    products(\\n      type: $type\\n      text: $text\\n      category: $category\\n      offset: $offset\\n      limit: $limit\\n    ) {\\n      items {\\n        id\\n        title\\n        slug\\n        unit\\n        price\\n        salePrice\\n        description\\n        discountInPercent\\n        type\\n        image\\n        gallery {\\n          url\\n        }\\n        categories {\\n          id\\n          title\\n          slug\\n        }\\n      }\\n      hasMore\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport dynamic from \"next/dynamic\";\nimport gql from \"graphql-tag\";\nimport { closeModal } from \"@redq/reuse-modal\";\nimport MagasinCard from \"components/MagasinCard/MagasinCard\";\nimport firstProjectPhoto from \"../../image/monoprix.jpg\";\nimport { ProductsRow, ProductsCol, ProductCardWrapper } from \"./Products.style\";\nimport Fade from \"react-reveal/Fade\";\nvar QuickView = dynamic(function () {\n  return import(\"../QuickView/QuickView\");\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"../QuickView/QuickView\")];\n    },\n    modules: [\"../QuickView/QuickView\"]\n  }\n});\nvar GET_PRODUCTS = gql(_templateObject());\nexport var Magasins = function Magasins(_ref) {\n  var deviceType = _ref.deviceType,\n      type = _ref.type,\n      _ref$fetchLimit = _ref.fetchLimit,\n      fetchLimit = _ref$fetchLimit === void 0 ? 8 : _ref$fetchLimit,\n      _ref$loadMore = _ref.loadMore,\n      loadMore = _ref$loadMore === void 0 ? true : _ref$loadMore;\n  var router = useRouter();\n\n  var _useState = useState(false),\n      loadingMore = _useState[0],\n      toggleLoading = _useState[1]; // Quick View Modal\n\n\n  var handleModalClose = function handleModalClose() {\n    var href = \"\".concat(router.pathname);\n    var as = router.asPath;\n    router.push(href, as, {\n      shallow: true\n    });\n    closeModal();\n  };\n\n  var handleQuickViewModal = React.useCallback(function (modalProps, deviceType, onModalClose) {\n    if (router.pathname === \"/Magasin/[title]\") {\n      var _as = \"/Magasin/\".concat(modalProps.title);\n\n      router.push(router.pathname, _as);\n      return;\n    }\n\n    var href = \"\".concat(router.pathname, \"?\").concat(modalProps.title);\n    var as = \"/Magasin/\".concat(modalProps.title);\n    router.push(href, as, {\n      shallow: true\n    });\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(ProductsRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, magasin.map(function (item, index) {\n    return __jsx(ProductsCol, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, __jsx(ProductCardWrapper, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, __jsx(Fade, {\n      duration: 800,\n      delay: index * 10,\n      style: {\n        height: \"100%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    }, __jsx(MagasinCard, {\n      title: item.title,\n      description: item.description,\n      deliveryFees: item.deliveryFees,\n      image: firstProjectPhoto,\n      deviceType: deviceType,\n      onClick: function onClick() {\n        return handleQuickViewModal(item, deviceType, handleModalClose);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }))));\n  })));\n};\nexport default Magasins;","map":{"version":3,"sources":["/Volumes/Second/npm/PFE_git/charioTN/packages/shop/containers/Magasins/Magasins.tsx"],"names":["React","useState","useRouter","dynamic","gql","closeModal","MagasinCard","firstProjectPhoto","ProductsRow","ProductsCol","ProductCardWrapper","Fade","QuickView","GET_PRODUCTS","Magasins","deviceType","type","fetchLimit","loadMore","router","loadingMore","toggleLoading","handleModalClose","href","pathname","as","asPath","push","shallow","handleQuickViewModal","useCallback","modalProps","onModalClose","title","magasin","map","item","index","height","description","deliveryFees"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport dynamic from \"next/dynamic\";\nimport gql from \"graphql-tag\";\nimport { openModal, closeModal } from \"@redq/reuse-modal\";\nimport MagasinCard from \"components/MagasinCard/MagasinCard\";\nimport firstProjectPhoto from \"../../image/monoprix.jpg\";\nimport {\n  ProductsRow,\n  ProductsCol,\n  ButtonWrapper,\n  LoaderWrapper,\n  LoaderItem,\n  ProductCardWrapper,\n} from \"./Products.style\";\nimport { CURRENCY } from \"helper/constant\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport Button from \"components/Button/Button\";\nimport Loader from \"components/Loader/Loader\";\nimport Placeholder from \"components/Placeholder/Placeholder\";\nimport Fade from \"react-reveal/Fade\";\nimport NoResultFound from \"components/NoResult/NoResult\";\n\nconst QuickView = dynamic(() => import(\"../QuickView/QuickView\"));\n\nconst GET_PRODUCTS = gql`\n  query getProducts(\n    $type: String\n    $text: String\n    $category: String\n    $offset: Int\n    $limit: Int\n  ) {\n    products(\n      type: $type\n      text: $text\n      category: $category\n      offset: $offset\n      limit: $limit\n    ) {\n      items {\n        id\n        title\n        slug\n        unit\n        price\n        salePrice\n        description\n        discountInPercent\n        type\n        image\n        gallery {\n          url\n        }\n        categories {\n          id\n          title\n          slug\n        }\n      }\n      hasMore\n    }\n  }\n`;\n\ntype MagasinProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n  type: string;\n  fetchLimit?: number;\n  loadMore?: boolean;\n};\nexport const Magasins: React.FC<MagasinProps> = ({\n  deviceType,\n  type,\n  fetchLimit = 8,\n  loadMore = true,\n}) => {\n  const router = useRouter();\n  const [loadingMore, toggleLoading] = useState(false);\n\n  // Quick View Modal\n  const handleModalClose = () => {\n    const href = `${router.pathname}`;\n    const as = router.asPath;\n    router.push(href, as, { shallow: true });\n    closeModal();\n  };\n  const handleQuickViewModal = React.useCallback(\n    (modalProps: any, deviceType: any, onModalClose: any) => {\n      if (router.pathname === \"/Magasin/[title]\") {\n        const as = `/Magasin/${modalProps.title}`;\n        router.push(router.pathname, as);\n        return;\n      }\n\n      const href = `${router.pathname}?${modalProps.title}`;\n      const as = `/Magasin/${modalProps.title}`;\n      router.push(href, as, { shallow: true });\n    },\n    []\n  );\n\n  return (\n    <>\n      <ProductsRow>\n        {magasin.map((item: any, index: number) => (\n          <ProductsCol key={index}>\n            <ProductCardWrapper>\n              <Fade\n                duration={800}\n                delay={index * 10}\n                style={{ height: \"100%\" }}\n              >\n                <MagasinCard\n                  title={item.title}\n                  description={item.description}\n                  deliveryFees={item.deliveryFees}\n                  image={firstProjectPhoto}\n                  deviceType={deviceType}\n                  onClick={() =>\n                    handleQuickViewModal(item, deviceType, handleModalClose)\n                  }\n                />\n              </Fade>\n            </ProductCardWrapper>\n          </ProductsCol>\n        ))}\n      </ProductsRow>\n    </>\n  );\n};\nexport default Magasins;\n"]},"metadata":{},"sourceType":"module"}