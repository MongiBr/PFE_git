{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Volumes/Second/npm/PFE_git/packages/shop/containers/ProductDetailsBook/ProductDetailsBook.tsx\";\n\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useRef } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport Button from 'components/Button/Button';\nimport InputIncDec from 'components/InputIncDec/InputIncDec';\nimport { ProductDetailsWrapper, ProductPreview, ProductInfo, BookTitle, BackButton, AuthorName, BookDescriptionWrapper, BookDescription, BookMetaTable, BookMetaTableRow, BookMetaItem, ProductMeta, ProductCartWrapper, ProductPriceWrapper, ProductPrice, SalePrice, ProductCartBtn, MetaSingle, MetaItem, DetailsWrapper, DetailsTitle, Description, Avatar, SocialNetworks, SocialIcon, RelatedItems } from './ProductDetailsBook.style';\nimport { LongArrowLeft, CartIcon, InkPen, AdobeIcon, Facebook, GooglePlus, Twitter, Linkedin } from 'components/AllSvgIcon';\nimport { CartContext } from 'contexts/cart/cart.context';\nimport { CURRENCY } from 'helper/constant';\nimport { findProductIndex, getProductQuantity } from 'helper/utility';\nimport Products from 'containers/Products/ProductsBook';\nimport { FormattedMessage } from 'react-intl';\n\nvar ProductDetails = function ProductDetails(_ref) {\n  var product = _ref.product,\n      deviceType = _ref.deviceType;\n\n  var _useContext = useContext(CartContext),\n      add = _useContext.add,\n      update = _useContext.update,\n      products = _useContext.products;\n\n  var data = product;\n  var index = findProductIndex(products, data.id);\n  var quantity = getProductQuantity(products, index);\n  var scrollRef = useRef(null);\n\n  var scrollToDiv = function scrollToDiv(e) {\n    e.preventDefault(); // scrollRef.current.scrollIntoView({ behavior: 'smooth' });\n\n    window.scrollTo({\n      top: scrollRef.current.getBoundingClientRect().top + window.pageYOffset - 65,\n      behavior: 'smooth'\n    });\n  };\n\n  var handleClick = function handleClick(e) {\n    e.stopPropagation();\n    add(e, data);\n  };\n\n  var handleUpdate = function handleUpdate(value, e) {\n    if (index === -1 && value === 1) {\n      add(e, data);\n    } else {\n      update(data.id, value);\n    }\n  };\n\n  useEffect(function () {\n    setTimeout(function () {\n      window.scrollTo(0, 0);\n    }, 500);\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(ProductDetailsWrapper, {\n    className: \"product-card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, __jsx(ProductPreview, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, __jsx(BackButton, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, __jsx(Button, {\n    title: \"Back\",\n    intlButtonId: \"backBtn\",\n    iconPosition: \"left\",\n    size: \"small\",\n    style: {\n      backgroundColor: '#ffffff',\n      border: '1px solid #f1f1f1',\n      color: '#77798c'\n    },\n    icon: __jsx(LongArrowLeft, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }),\n    onClick: Router.back,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  })), __jsx(\"img\", {\n    src: product.gallery[0].url,\n    alt: product.title,\n    className: \"product-image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  })), __jsx(ProductInfo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, __jsx(BookTitle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, product.title), __jsx(AuthorName, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, __jsx(InkPen, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }), \" \", product.author.name), __jsx(BookDescriptionWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, __jsx(BookDescription, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, product.description.substring(0, 600), __jsx(\"a\", {\n    href: \"#\",\n    onClick: scrollToDiv,\n    style: {\n      color: '#009e7f',\n      fontWeight: 700\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, \"Read More\")), __jsx(BookMetaTable, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, product.meta ? Object.entries(product.meta).map(function (_ref2, i, arr) {\n    var _ref3 = _slicedToArray(_ref2, 1),\n        item = _ref3[0];\n\n    return i !== arr.length - 1 && i !== arr.length - 2 ? __jsx(BookMetaTableRow, {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 23\n      }\n    }, __jsx(BookMetaItem, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }, item.replace(/^[a-z]|[A-Z]/g, function (v, i) {\n      return i === 0 ? v.toUpperCase() : ' ' + v.toLowerCase();\n    })), __jsx(BookMetaItem, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 25\n      }\n    }, item === 'languages' ? product.meta[item].map(function (lang, i, arr) {\n      return lang.charAt(0).toUpperCase() + lang.slice(1) + (i !== arr.length - 1 ? ', ' : '');\n    }) : product.meta[item])) : '';\n  }) : '')), __jsx(ProductCartWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, __jsx(ProductPriceWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, product.discountInPercent ? __jsx(SalePrice, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, CURRENCY, product.price) : '', __jsx(ProductPrice, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 15\n    }\n  }, CURRENCY, product.salePrice ? product.salePrice : product.price)), __jsx(ProductCartBtn, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, quantity <= 0 ? __jsx(Button, {\n    title: \"Add to Cart\",\n    intlButtonId: \"addToCartButton\",\n    iconPosition: \"left\",\n    size: \"small\",\n    className: \"cart-button\",\n    icon: __jsx(CartIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 25\n      }\n    }),\n    onClick: function onClick(e) {\n      return handleClick(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }) : __jsx(InputIncDec, {\n    value: quantity,\n    onClick: function onClick(e) {\n      e.stopPropagation(onclick);\n    },\n    onUpdate: function onUpdate(value, e) {\n      return handleUpdate(value, e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }), product.meta && product.meta.samplePDF.length !== 0 ? __jsx(Button, {\n    title: \"Read Free Sample\",\n    intlButtonId: \"readFreeSampleButton\",\n    iconPosition: \"left\",\n    size: \"small\",\n    variant: \"outlined\",\n    className: \"outline-button\",\n    icon: __jsx(AdobeIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 25\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }) : '')), __jsx(ProductMeta, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }, __jsx(MetaSingle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, product.categories ? product.categories.map(function (item) {\n    return __jsx(Link, {\n      href: \"/\".concat(product.type, \"?category=\").concat(item.slug),\n      key: \"link-\".concat(item.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 21\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 25\n      }\n    }, __jsx(MetaItem, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 27\n      }\n    }, item.title)));\n  }) : '')))), __jsx(DetailsWrapper, {\n    ref: scrollRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }\n  }, __jsx(DetailsTitle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 9\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"bookSectionTitle\",\n    defaultMessage: \"About The Book\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 11\n    }\n  })), __jsx(Description, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 9\n    }\n  }, product.description)), __jsx(DetailsWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }\n  }, __jsx(DetailsTitle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"authorSectionTitle\",\n    defaultMessage: \"About The Author\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 11\n    }\n  })), __jsx(AuthorName, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }\n  }, product.author.avatar && product.author.avatar.length !== 0 ? __jsx(Avatar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: product.author.avatar,\n    alt: product.author.name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 15\n    }\n  })) : __jsx(InkPen, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  }), product.author.name), __jsx(Description, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }\n  }, product.author.bio), __jsx(SocialNetworks, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 9\n    }\n  }, product.author && product.author.socials.map(function (item) {\n    return item.profileLink.length !== 0 ? __jsx(SocialIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }\n    }, __jsx(\"a\", {\n      key: item.id,\n      href: item.profileLink,\n      target: \"_blank\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 19\n      }\n    }, item.media === 'facebook' ? __jsx(Facebook, {\n      color: \"#3b5999\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 23\n      }\n    }) : item.media === 'twitter' ? __jsx(Twitter, {\n      color: \"#55acee\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 23\n      }\n    }) : item.media === 'google' ? __jsx(GooglePlus, {\n      color: \"#dd4b39\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 23\n      }\n    }) : item.media === 'linkedin' ? __jsx(Linkedin, {\n      color: \"#0077B5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 23\n      }\n    }) : '')) : '';\n  }))), __jsx(RelatedItems, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 9\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"intlReletedItems\",\n    defaultMessage: \"Related Items\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 11\n    }\n  })), __jsx(Products, {\n    type: product.type.toLowerCase(),\n    deviceType: deviceType,\n    loadMore: false,\n    fetchLimit: 10,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default ProductDetails;","map":{"version":3,"sources":["/Volumes/Second/npm/PFE_git/packages/shop/containers/ProductDetailsBook/ProductDetailsBook.tsx"],"names":["React","useContext","useEffect","useRef","Link","Router","Button","InputIncDec","ProductDetailsWrapper","ProductPreview","ProductInfo","BookTitle","BackButton","AuthorName","BookDescriptionWrapper","BookDescription","BookMetaTable","BookMetaTableRow","BookMetaItem","ProductMeta","ProductCartWrapper","ProductPriceWrapper","ProductPrice","SalePrice","ProductCartBtn","MetaSingle","MetaItem","DetailsWrapper","DetailsTitle","Description","Avatar","SocialNetworks","SocialIcon","RelatedItems","LongArrowLeft","CartIcon","InkPen","AdobeIcon","Facebook","GooglePlus","Twitter","Linkedin","CartContext","CURRENCY","findProductIndex","getProductQuantity","Products","FormattedMessage","ProductDetails","product","deviceType","add","update","products","data","index","id","quantity","scrollRef","scrollToDiv","e","preventDefault","window","scrollTo","top","current","getBoundingClientRect","pageYOffset","behavior","handleClick","stopPropagation","handleUpdate","value","setTimeout","backgroundColor","border","color","back","gallery","url","title","author","name","description","substring","fontWeight","meta","Object","entries","map","i","arr","item","length","replace","v","toUpperCase","toLowerCase","lang","charAt","slice","discountInPercent","price","salePrice","onclick","samplePDF","categories","type","slug","avatar","bio","socials","profileLink","media"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useRef } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport Button from 'components/Button/Button';\nimport InputIncDec from 'components/InputIncDec/InputIncDec';\nimport {\n  ProductDetailsWrapper,\n  ProductPreview,\n  ProductInfo,\n  BookTitle,\n  BackButton,\n  AuthorName,\n  BookDescriptionWrapper,\n  BookDescription,\n  BookMetaTable,\n  BookMetaTableRow,\n  BookMetaItem,\n  ProductMeta,\n  ProductCartWrapper,\n  ProductPriceWrapper,\n  ProductPrice,\n  SalePrice,\n  ProductCartBtn,\n  MetaSingle,\n  MetaItem,\n  DetailsWrapper,\n  DetailsTitle,\n  Description,\n  Avatar,\n  SocialNetworks,\n  SocialIcon,\n  RelatedItems,\n} from './ProductDetailsBook.style';\nimport {\n  LongArrowLeft,\n  CartIcon,\n  InkPen,\n  AdobeIcon,\n  Facebook,\n  GooglePlus,\n  Twitter,\n  Linkedin,\n} from 'components/AllSvgIcon';\nimport ReadMore from 'components/Truncate/Truncate';\nimport { CartContext } from 'contexts/cart/cart.context';\nimport { CURRENCY } from 'helper/constant';\nimport { findProductIndex, getProductQuantity } from 'helper/utility';\nimport { Product } from 'interfaces';\nimport Products from 'containers/Products/ProductsBook';\nimport { FormattedMessage } from 'react-intl';\n\ntype ProdutDetailsProps = {\n  product: Product | any;\n  deviceType: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n};\n\nconst ProductDetails: React.FunctionComponent<ProdutDetailsProps> = ({\n  product,\n  deviceType,\n}) => {\n  const { add, update, products } = useContext(CartContext);\n  const data = product;\n  const index = findProductIndex(products, data.id);\n  const quantity = getProductQuantity(products, index);\n  const scrollRef = useRef(null);\n\n  const scrollToDiv = e => {\n    e.preventDefault();\n    // scrollRef.current.scrollIntoView({ behavior: 'smooth' });\n    window.scrollTo({\n      top:\n        scrollRef.current.getBoundingClientRect().top + window.pageYOffset - 65,\n      behavior: 'smooth',\n    });\n  };\n\n  const handleClick = e => {\n    e.stopPropagation();\n    add(e, data);\n  };\n\n  const handleUpdate = (value: number, e: any) => {\n    if (index === -1 && value === 1) {\n      add(e, data);\n    } else {\n      update(data.id, value);\n    }\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      window.scrollTo(0, 0);\n    }, 500);\n  }, []);\n\n  return (\n    <>\n      <ProductDetailsWrapper className='product-card'>\n        <ProductPreview>\n          <BackButton>\n            <Button\n              title='Back'\n              intlButtonId='backBtn'\n              iconPosition='left'\n              size='small'\n              style={{\n                backgroundColor: '#ffffff',\n                border: '1px solid #f1f1f1',\n                color: '#77798c',\n              }}\n              icon={<LongArrowLeft />}\n              onClick={Router.back}\n            />\n          </BackButton>\n\n          <img\n            src={product.gallery[0].url}\n            alt={product.title}\n            className='product-image'\n          />\n        </ProductPreview>\n\n        <ProductInfo>\n          <BookTitle>{product.title}</BookTitle>\n          <AuthorName>\n            <InkPen /> {product.author.name}\n          </AuthorName>\n          <BookDescriptionWrapper>\n            <BookDescription>\n              {product.description.substring(0, 600)}\n              <a\n                href='#'\n                onClick={scrollToDiv}\n                style={{ color: '#009e7f', fontWeight: 700 }}\n              >\n                Read More\n              </a>\n            </BookDescription>\n            <BookMetaTable>\n              {product.meta\n                ? Object.entries(product.meta).map(([item], i, arr): any =>\n                    i !== arr.length - 1 && i !== arr.length - 2 ? (\n                      <BookMetaTableRow key={i}>\n                        <BookMetaItem>\n                          {item.replace(/^[a-z]|[A-Z]/g, function(v, i) {\n                            return i === 0\n                              ? v.toUpperCase()\n                              : ' ' + v.toLowerCase();\n                          })}\n                        </BookMetaItem>\n                        <BookMetaItem>\n                          {item === 'languages'\n                            ? product.meta[item].map(\n                                (lang, i, arr): any =>\n                                  lang.charAt(0).toUpperCase() +\n                                  lang.slice(1) +\n                                  (i !== arr.length - 1 ? ', ' : '')\n                              )\n                            : product.meta[item]}\n                        </BookMetaItem>\n                      </BookMetaTableRow>\n                    ) : (\n                      ''\n                    )\n                  )\n                : ''}\n            </BookMetaTable>\n          </BookDescriptionWrapper>\n\n          <ProductCartWrapper>\n            <ProductPriceWrapper>\n              {product.discountInPercent ? (\n                <SalePrice>\n                  {CURRENCY}\n                  {product.price}\n                </SalePrice>\n              ) : (\n                ''\n              )}\n\n              <ProductPrice>\n                {CURRENCY}\n                {product.salePrice ? product.salePrice : product.price}\n              </ProductPrice>\n            </ProductPriceWrapper>\n\n            <ProductCartBtn>\n              {quantity <= 0 ? (\n                <Button\n                  title='Add to Cart'\n                  intlButtonId='addToCartButton'\n                  iconPosition='left'\n                  size='small'\n                  className='cart-button'\n                  icon={<CartIcon />}\n                  onClick={e => handleClick(e)}\n                />\n              ) : (\n                <InputIncDec\n                  value={quantity}\n                  onClick={(e: any) => {\n                    e.stopPropagation(onclick);\n                  }}\n                  onUpdate={(value: number, e) => handleUpdate(value, e)}\n                />\n              )}\n\n              {product.meta && product.meta.samplePDF.length !== 0 ? (\n                <Button\n                  title='Read Free Sample'\n                  intlButtonId='readFreeSampleButton'\n                  iconPosition='left'\n                  size='small'\n                  variant='outlined'\n                  className='outline-button'\n                  icon={<AdobeIcon />}\n                />\n              ) : (\n                ''\n              )}\n            </ProductCartBtn>\n          </ProductCartWrapper>\n\n          <ProductMeta>\n            <MetaSingle>\n              {product.categories\n                ? product.categories.map((item: any) => (\n                    <Link\n                      href={`/${product.type}?category=${item.slug}`}\n                      key={`link-${item.id}`}\n                    >\n                      {\n                        <a>\n                          <MetaItem>{item.title}</MetaItem>\n                        </a>\n                      }\n                    </Link>\n                  ))\n                : ''}\n            </MetaSingle>\n          </ProductMeta>\n        </ProductInfo>\n      </ProductDetailsWrapper>\n\n      <DetailsWrapper ref={scrollRef}>\n        <DetailsTitle>\n          <FormattedMessage\n            id='bookSectionTitle'\n            defaultMessage='About The Book'\n          />\n        </DetailsTitle>\n        <Description>{product.description}</Description>\n      </DetailsWrapper>\n\n      <DetailsWrapper>\n        <DetailsTitle>\n          <FormattedMessage\n            id='authorSectionTitle'\n            defaultMessage='About The Author'\n          />\n        </DetailsTitle>\n        <AuthorName>\n          {product.author.avatar && product.author.avatar.length !== 0 ? (\n            <Avatar>\n              <img src={product.author.avatar} alt={product.author.name} />\n            </Avatar>\n          ) : (\n            <InkPen />\n          )}\n\n          {product.author.name}\n        </AuthorName>\n\n        <Description>{product.author.bio}</Description>\n        <SocialNetworks>\n          {product.author &&\n            product.author.socials.map(item =>\n              item.profileLink.length !== 0 ? (\n                <SocialIcon>\n                  <a key={item.id} href={item.profileLink} target='_blank'>\n                    {item.media === 'facebook' ? (\n                      <Facebook color='#3b5999' />\n                    ) : item.media === 'twitter' ? (\n                      <Twitter color='#55acee' />\n                    ) : item.media === 'google' ? (\n                      <GooglePlus color='#dd4b39' />\n                    ) : item.media === 'linkedin' ? (\n                      <Linkedin color='#0077B5' />\n                    ) : (\n                      ''\n                    )}\n                  </a>\n                </SocialIcon>\n              ) : (\n                ''\n              )\n            )}\n        </SocialNetworks>\n      </DetailsWrapper>\n\n      <RelatedItems>\n        <h2>\n          <FormattedMessage\n            id='intlReletedItems'\n            defaultMessage='Related Items'\n          />\n        </h2>\n        <Products\n          type={product.type.toLowerCase()}\n          deviceType={deviceType}\n          loadMore={false}\n          fetchLimit={10}\n        />\n      </RelatedItems>\n    </>\n  );\n};\n\nexport default ProductDetails;\n"]},"metadata":{},"sourceType":"module"}