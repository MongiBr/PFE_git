{"ast":null,"code":"var _jsxFileName = \"/Volumes/Second/npm/PFE_git/charioTN/packages/shop/containers/Magasins/Magasins.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport dynamic from \"next/dynamic\";\nimport gql from \"graphql-tag\";\nimport { closeModal } from \"@redq/reuse-modal\";\nimport MagasinCard from \"components/MagasinCard/MagasinCard\";\nimport firstProjectPhoto from \"../../image/monoprix.jpg\";\nimport { ProductsRow, ProductsCol, ProductCardWrapper } from \"./Products.style\";\nimport Fade from \"react-reveal/Fade\";\nconst QuickView = dynamic(() => import(\"../QuickView/QuickView\"), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"../QuickView/QuickView\")],\n    modules: [\"../QuickView/QuickView\"]\n  }\n});\nconst GET_PRODUCTS = gql`\n  query getProducts(\n    $type: String\n    $text: String\n    $category: String\n    $offset: Int\n    $limit: Int\n  ) {\n    products(\n      type: $type\n      text: $text\n      category: $category\n      offset: $offset\n      limit: $limit\n    ) {\n      items {\n        id\n        title\n        slug\n        unit\n        price\n        salePrice\n        description\n        discountInPercent\n        type\n        image\n        gallery {\n          url\n        }\n        categories {\n          id\n          title\n          slug\n        }\n      }\n      hasMore\n    }\n  }\n`;\nexport const Magasins = ({\n  deviceType,\n  type,\n  fetchLimit = 8,\n  loadMore = true\n}) => {\n  const router = useRouter();\n  const {\n    0: loadingMore,\n    1: toggleLoading\n  } = useState(false); // Quick View Modal\n\n  const handleModalClose = () => {\n    const href = `${router.pathname}`;\n    const as = router.asPath;\n    router.push(href, as, {\n      shallow: true\n    });\n    closeModal();\n  };\n\n  const handleQuickViewModal = React.useCallback((modalProps, deviceType, onModalClose) => {\n    if (router.pathname === \"/Magasin/[title]\") {\n      const as = `/Magasin/${modalProps.title}`;\n      router.push(router.pathname, as);\n      return;\n    }\n\n    const href = `${router.pathname}?${modalProps.title}`;\n    const as = `/Magasin/${modalProps.title}`;\n    router.push(href, as, {\n      shallow: true\n    });\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(ProductsRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, magasin.map((item, index) => __jsx(ProductsCol, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, __jsx(ProductCardWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, __jsx(Fade, {\n    duration: 800,\n    delay: index * 10,\n    style: {\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, __jsx(MagasinCard, {\n    title: item.title,\n    description: item.description,\n    deliveryFees: item.deliveryFees,\n    image: firstProjectPhoto,\n    deviceType: deviceType,\n    onClick: () => handleQuickViewModal(item, deviceType, handleModalClose),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  })))))));\n};\nexport default Magasins;","map":{"version":3,"sources":["/Volumes/Second/npm/PFE_git/charioTN/packages/shop/containers/Magasins/Magasins.tsx"],"names":["React","useState","useRouter","dynamic","gql","closeModal","MagasinCard","firstProjectPhoto","ProductsRow","ProductsCol","ProductCardWrapper","Fade","QuickView","GET_PRODUCTS","Magasins","deviceType","type","fetchLimit","loadMore","router","loadingMore","toggleLoading","handleModalClose","href","pathname","as","asPath","push","shallow","handleQuickViewModal","useCallback","modalProps","onModalClose","title","magasin","map","item","index","height","description","deliveryFees"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport dynamic from \"next/dynamic\";\nimport gql from \"graphql-tag\";\nimport { openModal, closeModal } from \"@redq/reuse-modal\";\nimport MagasinCard from \"components/MagasinCard/MagasinCard\";\nimport firstProjectPhoto from \"../../image/monoprix.jpg\";\nimport {\n  ProductsRow,\n  ProductsCol,\n  ButtonWrapper,\n  LoaderWrapper,\n  LoaderItem,\n  ProductCardWrapper,\n} from \"./Products.style\";\nimport { CURRENCY } from \"helper/constant\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport Button from \"components/Button/Button\";\nimport Loader from \"components/Loader/Loader\";\nimport Placeholder from \"components/Placeholder/Placeholder\";\nimport Fade from \"react-reveal/Fade\";\nimport NoResultFound from \"components/NoResult/NoResult\";\n\nconst QuickView = dynamic(() => import(\"../QuickView/QuickView\"));\n\nconst GET_PRODUCTS = gql`\n  query getProducts(\n    $type: String\n    $text: String\n    $category: String\n    $offset: Int\n    $limit: Int\n  ) {\n    products(\n      type: $type\n      text: $text\n      category: $category\n      offset: $offset\n      limit: $limit\n    ) {\n      items {\n        id\n        title\n        slug\n        unit\n        price\n        salePrice\n        description\n        discountInPercent\n        type\n        image\n        gallery {\n          url\n        }\n        categories {\n          id\n          title\n          slug\n        }\n      }\n      hasMore\n    }\n  }\n`;\n\ntype MagasinProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n  type: string;\n  fetchLimit?: number;\n  loadMore?: boolean;\n};\nexport const Magasins: React.FC<MagasinProps> = ({\n  deviceType,\n  type,\n  fetchLimit = 8,\n  loadMore = true,\n}) => {\n  const router = useRouter();\n  const [loadingMore, toggleLoading] = useState(false);\n\n  // Quick View Modal\n  const handleModalClose = () => {\n    const href = `${router.pathname}`;\n    const as = router.asPath;\n    router.push(href, as, { shallow: true });\n    closeModal();\n  };\n  const handleQuickViewModal = React.useCallback(\n    (modalProps: any, deviceType: any, onModalClose: any) => {\n      if (router.pathname === \"/Magasin/[title]\") {\n        const as = `/Magasin/${modalProps.title}`;\n        router.push(router.pathname, as);\n        return;\n      }\n\n      const href = `${router.pathname}?${modalProps.title}`;\n      const as = `/Magasin/${modalProps.title}`;\n      router.push(href, as, { shallow: true });\n    },\n    []\n  );\n\n  return (\n    <>\n      <ProductsRow>\n        {magasin.map((item: any, index: number) => (\n          <ProductsCol key={index}>\n            <ProductCardWrapper>\n              <Fade\n                duration={800}\n                delay={index * 10}\n                style={{ height: \"100%\" }}\n              >\n                <MagasinCard\n                  title={item.title}\n                  description={item.description}\n                  deliveryFees={item.deliveryFees}\n                  image={firstProjectPhoto}\n                  deviceType={deviceType}\n                  onClick={() =>\n                    handleQuickViewModal(item, deviceType, handleModalClose)\n                  }\n                />\n              </Fade>\n            </ProductCardWrapper>\n          </ProductsCol>\n        ))}\n      </ProductsRow>\n    </>\n  );\n};\nexport default Magasins;\n"]},"metadata":{},"sourceType":"module"}