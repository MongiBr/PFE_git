{"version":3,"file":"static/webpack/static/development/pages/_app.js.bc220d080bd6a88fc863.hot-update.js","sources":["webpack:///./components/SearchBox/SearchBox.tsx","webpack:///./contexts/search/search.context.tsx"],"sourcesContent":["import InputSearch from \"./Input\";\nimport React, { useEffect, useRef, useState, useContext } from \"react\";\nimport SearchResults from \"./SearchResults\";\nimport SearchWrapper, { SearchBoxWrapper } from \"./SearchBox.style\";\nimport { SearchIcon } from \"../AllSvgIcon\";\nimport Popover from \"components/Popover/Popover\";\nimport { SearchContext } from \"contexts/search/search.context\";\nimport styled from \"styled-components\";\nimport { FruitsVegetable, MenuDown, FacialCare } from \"components/AllSvgIcon\";\nimport HeaderWrapper, {\n  DropDownArrow,\n  SelectedType,\n  MainMenu,\n  TypeIcon,\n} from \"containers/LayoutContainer/Header/Header.style\";\n\ntype SearchBoxProps = {\n  suggestions?: string[];\n  buttonText?: string;\n  buttonIcon?: React.ReactNode;\n  inputStyle?: React.CSSProperties;\n  style?: React.CSSProperties;\n  bordered?: boolean;\n  hideType?: boolean;\n  showSvg?: boolean;\n  expand?: boolean;\n  minimal?: boolean;\n  autoSuggestion?: boolean;\n  placeholder?: string;\n  className?: string;\n  handleSearch?: Function;\n  onClick?: Function;\n  value?: any;\n  pathname?: string;\n};\n\nconst MenuArray = [\n  {\n    icon: <FruitsVegetable />,\n    label: \"Grocery\",\n  },\n  {\n    label: \"Foods\",\n    icon: <FacialCare />,\n  },\n];\n\nconst LocationsArray = [\n  {\n    state: \"Sousse\",\n    cities: [\"Kalaa\", \"Jaouhra\"],\n  },\n  {\n    state: \"Tunis\",\n    cities: [\"Lac\", \"La fayette\"],\n  },\n];\n\nconst Icon = styled.span`\n  min-width: 16px;\n  margin-right: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Search: React.FC<SearchBoxProps> = ({\n  suggestions,\n  buttonText,\n  buttonIcon,\n  inputStyle,\n  style,\n  bordered,\n  hideType,\n  showSvg,\n  autoSuggestion,\n  placeholder,\n  className,\n  handleSearch,\n  onClick,\n  value,\n  expand,\n  minimal,\n  pathname,\n}) => {\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [toggleSuggestion, setToggleSuggestion] = useState(false);\n  const [toggleSearch, setToggleSearch] = useState(false);\n\n  let searchRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    document.addEventListener(\"click\", handleClickOutside, false);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside, false);\n    };\n  }, []);\n\n  const handleSearchInput = (event: any) => {\n    setSearchValue(event.target.value);\n    setToggleSuggestion(true);\n    handleSearch(event.target.value);\n  };\n\n  const ucwords = (str: string) => {\n    const newString = str.replace(/\\//g, \"\");\n    const humanString = newString.replace(/-/g, \" \");\n    return (humanString + \"\").replace(/^([a-z])|\\s+([a-z])/g, function($1) {\n      return $1.toUpperCase();\n    });\n  };\n\n  const setSuggestion = (suggestion: any) => {\n    setSearchValue(suggestion);\n    setToggleSuggestion(false);\n  };\n\n  const handleClickOutside = (event: any) => {\n    if (searchRef.current && !searchRef.current.contains(event.target)) {\n      setToggleSuggestion(false);\n      setToggleSearch(false);\n    }\n  };\n\n  const onClearBtnClick = () => {\n    setSearchValue(\"\");\n  };\n\n  const [activeMenu, setActiveMenu] = useState({\n    icon: <FruitsVegetable />,\n    label: \"Grocery\",\n  });\n  const {\n    state: { search },\n    updateSearch,\n  } = useContext<any>(SearchContext);\n\n  const [activeCity, setActiveCity] = useState(\"\");\n\n  const StateItem = (item: any) => {\n    return (\n      <div\n        className=\"menu-item\"\n        key={item.state}\n        onClick={() => {\n          updateSearch(item);\n          setActiveCity(item.cities[0]);\n        }}\n      >\n        {item.state}\n      </div>\n    );\n  };\n  const CityItem = (item: any) => {\n    return (\n      <div className=\"menu-item\" key={item} onClick={() => setActiveCity(item)}>\n        {item}\n      </div>\n    );\n  };\n  const NavItem = (item: any) => {\n    return (\n      <span key={item.label} onClick={() => setActiveMenu(item)}>\n        {item.label}\n      </span>\n    );\n  };\n\n  return (\n    <SearchWrapper className={className}>\n      <SearchBoxWrapper\n        className={`${hideType ? \"hideType\" : \"\"} ${\n          expand === true ? (toggleSearch ? \"expanded\" : \"collapsed\") : \"\"\n        } ${minimal === true ? \"minimal\" : \"\"}`}\n      >\n        <Popover\n          className=\"right\"\n          handler={\n            <SelectedType>\n              <div className=\"menu-item\">\n                <span>{search.state}</span>\n              </div>\n              <DropDownArrow>\n                <MenuDown />\n              </DropDownArrow>\n            </SelectedType>\n          }\n          content={<>{LocationsArray.map(StateItem)}</>}\n        />\n        <Popover\n          className=\"right\"\n          handler={\n            <SelectedType>\n              <span>\n                <span>{activeCity}</span>\n              </span>\n              <DropDownArrow>\n                <MenuDown />\n              </DropDownArrow>\n            </SelectedType>\n          }\n          content={<>{search.cities.map(CityItem)}</>}\n        />\n\n        <Popover\n          className=\"right\"\n          handler={\n            <SelectedType>\n              <span>\n                <TypeIcon>{activeMenu.icon}</TypeIcon>\n                <span>{activeMenu.label}</span>\n              </span>\n              <DropDownArrow>\n                <MenuDown />\n              </DropDownArrow>\n            </SelectedType>\n          }\n          content={<>{MenuArray.map(NavItem)}</>}\n        />\n        {/* <InputSearch\n          type=\"text\"\n          value={value}\n          onChange={handleSearchInput}\n          onFocus={() => setToggleSearch(true)}\n          onBlur={() => setToggleSearch(false)}\n          buttonIcon={buttonIcon}\n          buttonText={buttonText}\n          placeholder={placeholder}\n          style={inputStyle}\n          bordered={bordered}\n          showSvg={showSvg}\n          onClick={() => onClick(searchValue)}\n        /> */}\n      </SearchBoxWrapper>\n      {autoSuggestion && toggleSuggestion ? (\n        <SearchResults\n          suggestions={suggestions}\n          clearSearch={onClearBtnClick}\n          setSuggestionValue={(suggestion: any) => setSuggestion(suggestion)}\n        />\n      ) : null}\n    </SearchWrapper>\n  );\n};\n\nSearch.defaultProps = {\n  bordered: false,\n  autoSuggestion: false,\n  buttonText: \"Search\",\n  buttonIcon: <SearchIcon />,\n  placeholder: \"Search your products from here\",\n  inputStyle: {\n    width: \"100%\",\n  },\n};\n\nexport default Search;\n","import { createContext } from \"react\";\nexport const SearchContext = createContext<Partial<any>>({});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA2BA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAMA;AAEA;AACA;AAFA;AAKA;AACA;AAFA;AAMA;AAAA;AAAA;AAAA;AACA;AAOA;AAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;AA6CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AA5CA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAsDA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgCA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;AANA;AAWA;;;;;;;;;;;;AChQA;AAAA;AAAA;AAAA;AAAA;AACA;;;;A","sourceRoot":""}