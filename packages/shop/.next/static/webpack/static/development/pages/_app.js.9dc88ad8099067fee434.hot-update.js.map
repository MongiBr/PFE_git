{"version":3,"file":"static/webpack/static/development/pages/_app.js.9dc88ad8099067fee434.hot-update.js","sources":["webpack:///./contexts/search/search.provider.tsx"],"sourcesContent":["import React, { useReducer, useEffect } from \"react\";\nimport { SearchContext } from \"./search.context\";\ntype ActionType = {\n  type: \"UPDATE\" | \"RESET\" | \"UPDATE_LOCATION\";\n  payload: object;\n};\n\nfunction reducer(state: any, action: ActionType): any {\n  switch (action.type) {\n    case \"UPDATE\":\n      return { ...state, ...action.payload };\n    case \"UPDATE_LOCATION\":\n      return { ...state, ...action.payload };\n    case \"RESET\":\n      return { page: 1, search: { state: \"\", cities: [] } };\n    default:\n      return state;\n  }\n}\n\ntype SearchProviderProps = {\n  query: any;\n};\n\nexport const SearchProvider: React.FunctionComponent<SearchProviderProps> = ({\n  children,\n  query,\n}) => {\n  const [state, dispatch] = useReducer(reducer, {\n    ...query,\n    page: 1,\n    search: { state: \"\", cities: [] },\n  });\n  const updateSearch = (search) => {\n    dispatch({ type: \"UPDATE_LOCATION\", payload: search });\n    const serializedState = JSON.stringify(search);\n    localStorage.setItem(\"search\", serializedState);\n  };\n  useEffect(() => {\n    const search = localStorage.getItem(\"search\");\n    updateSearch(search);\n  }, []);\n  return (\n    <SearchContext.Provider value={{ state, dispatch, updateSearch }}>\n      {children}\n    </SearchContext.Provider>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AARA;AAUA;AACA;AAKA;AAGA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AAAA;AAAA;AAHA;AADA;AAAA;AACA;AAKA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;A","sourceRoot":""}